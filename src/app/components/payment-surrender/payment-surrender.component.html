<div class="payment-surrender-container">
  <app-sidebar [sidebarType]="'finance'" [(open)]="sidebarOpen"></app-sidebar>
  
  <div class="main-content">
    <app-header 
      title="PAYMENT SURRENDER" 
      subtitle="Finance Services/Payment Surrender"
      headerClass="finance"
      [showBackButton]="false"
      [(sidebarOpen)]="sidebarOpen">
    </app-header>
    
    <div class="payment-surrender-content">
      <div class="card-header">
        <h2>PAYMENT SURRENDER</h2>
        <button class="add-new-btn" (click)="navigateToNewPaymentSurrender()">
          <img src="assets/Add.svg" alt="Add" width="16" height="16" />
          ADD NEW PAYMENT SURRENDER
        </button>
      </div>
      
      <div class="card-body">
        <button class="filter-btn">
          <img src="assets/Add filter.svg" alt="Add filter" width="10" height="10" style="margin-right: 6px;" /> Add filter
        </button>
        <div class="search-box">
          <img src="assets/Search here.svg" alt="Search here" width="10" height="10" class="search-icon" />
          <input type="text" placeholder="Search here" [(ngModel)]="searchTerm">
        </div>
      </div>
      
      <!-- Desktop Table -->
      <div class="table-container hide-mobile">
        <table class="surrender-table">
          <thead>
            <tr>
              <th>No.</th>
              <th>Currency Code</th>
              <th>Amount Advanced (LCY)</th>
              <th>Actual Spent (LCY)</th>
              <th>Description</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let surrender of paginatedData; let i = index" [class.striped]="i % 2 === 1">
              <td>{{ surrender.no }}</td>
              <td>{{ surrender.currencyCode }}</td>
              <td>{{ surrender.amountAdvanced | currency:'KSH':'symbol':'1.0-0' }}</td>
              <td>{{ surrender.actualSpent | currency:'KSH':'symbol':'1.0-0' }}</td>
              <td>{{ surrender.description }}</td>
              <td>
                <span class="status-badge" [class]="'status-' + surrender.status.toLowerCase()">
                  {{ surrender.status }}
                </span>
              </td>
              <td class="action-cell">
                <button class="action-btn view-btn" (click)="viewSurrender(surrender.id)">
                  <img src="assets/view.svg" alt="View" width="16" height="16" />
                  VIEW
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- Mobile Cards -->
      <div class="mobile-cards show-mobile">
        <div class="surrender-card" *ngFor="let surrender of paginatedData">
          <div class="card-header-mobile">
            <h3>{{ surrender.no }}</h3>
            <span class="status-badge" [class]="'status-' + surrender.status.toLowerCase()">
              {{ surrender.status }}
            </span>
          </div>
          <div class="card-body-mobile">
            <div class="card-row">
              <span class="card-label">Currency Code:</span>
              <span class="card-value">{{ surrender.currencyCode }}</span>
            </div>
            <div class="card-row">
              <span class="card-label">Amount Advanced:</span>
              <span class="card-value">{{ surrender.amountAdvanced | currency:'KSH':'symbol':'1.0-0' }}</span>
            </div>
            <div class="card-row">
              <span class="card-label">Actual Spent:</span>
              <span class="card-value">{{ surrender.actualSpent | currency:'KSH':'symbol':'1.0-0' }}</span>
            </div>
            <div class="card-row">
              <span class="card-label">Description:</span>
              <span class="card-value">{{ surrender.description }}</span>
            </div>
          </div>
          <div class="card-actions">
            <button class="action-btn view-btn mobile" (click)="viewSurrender(surrender.id)">
              <img src="assets/view.svg" alt="View" width="16" height="16" />
              VIEW
            </button>
          </div>
        </div>
      </div>
      
      <!-- Pagination -->
      <div class="pagination">
        <button class="page-btn" [disabled]="currentPage === 1" (click)="previousPage()">Prev</button>
        <button *ngFor="let page of getVisiblePages()" 
                class="page-btn" 
                [class.active]="page === currentPage"
                (click)="goToPage(page)">
          {{ page }}
        </button>
        <button class="page-btn" [disabled]="currentPage === totalPages" (click)="nextPage()">Next</button>
      </div>
    </div>
    
    <app-footer></app-footer>
  </div>
</div>